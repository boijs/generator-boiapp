// 引入style文件
require('../style/main.<%= appname %>.<%= styleSyntax%>');
// 同步模块A
const moduleA = require('./part.moduleA.js');

window.execModuleA = ()=>{
  console.log('moduleA')
  moduleA();
};

window.execModuleB = () => {
  // 异步加载moduleB模块
  require.ensure([],(require)=>{
    let moduleB = require('./part.moduleB.js');
    moduleB();
  },'asyncModule');
};

window.testApi = (type) => {
  let head = document.head;
  let script = document.createElement('script');
  let params = '';
  if (type == 0) {
    // 请求成功测试
    params = 'uid=123&callback=jsonpSuccessCallback';
  } else {
    // 请求失败测试
    params = 'callback=jsonpSuccessCallback';
  }
  // API_TEST根据boi-conf配置中的define字段被编译为对应字符
  script.src = API_TEST + '?' + params;
  window.jsonpSuccessCallback = (res) => {
    alert(res.msg);
    head.removeChild(script);
    window.jsonpSuccessCallback = null;
  };
  head.appendChild(script);
};
